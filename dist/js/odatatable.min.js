"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var a={ajax:{},buttons:["copy","csv","excel","pdf","print"],dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>B",scrollX:!0,serverSide:!0};e.fn.oDataTable=function(t){var r=e.extend({},a,t);return r.initComplete=function(a){return function(){a&&a.apply(this,arguments),0!=r.searching&&this.api().columns().every(function(){var a=r.columns[this.index()];if(0!=a.searchable){var t=a.searchType;t&&e.fn.oDataTable.SearchTypes[t]||(t="default");var n=a.searchChoices;n?e.fn.oDataTable.SearchTypes[t].setHeaderFooter_searchChoices(this,r,a,n):e.fn.oDataTable.SearchTypes[t].setHeaderFooter(this,r,a)}})}}(r.initComplete),this.each(function(){var a=e(this);e.fn.DataTable.isDataTable(a)&&a.dataTable().api().destroy(),a.empty(),0!=r.searching&&(a.append("<thead><tr>"+r.columns.map(function(){return'<th style="vertical-align: top;"></th>'}).join("")+"</tr></thead>"),a.append("<tfoot><tr>"+r.columns.map(function(){return'<td style="position: relative; z-index: 1000;"></td>'}).join("")+"</tr></tfoot>"));var t=void 0;r.ajax.data=function(a){return function(n){a&&a.call(null,n),t=n.draw;var o={};o.$count="true",o.$filter=n.columns.filter(function(a,t){if(a.searchable&&null!=a.search&&a.search.value){var n=r.columns[t].searchType;return n&&e.fn.oDataTable.SearchTypes[n]||(n="default"),a.filterString=e.fn.oDataTable.SearchTypes[n].getFilterString(a.data,a.search.value),a.filterString}return!1}).map(function(e){return e.filterString}).join(" and ")||null,r.$filter&&(o.$filter=o.$filter?"("+o.$filter+") and "+r.$filter:r.$filter),o.$orderby=n.order.map(function(e){return n.columns[e.column].data+" "+e.dir}).join(",")||null,r.$orderby&&(o.$orderby=o.$orderby?"("+o.$orderby+"),"+r.$orderby:r.$orderby),o.$search=n.search&&n.search.value?n.search.value:null,o.$select=n.columns.filter(function(e,a,t){return t.indexOf(e)===a}).map(function(e){return e.data}).join(","),r.$select&&(o.$select=o.$select?o.$select+","+r.$select:r.$select),o.$skip=n.start,o.$top=n.length;var l=[];for(var c in o)null!=o[c]&&l.push(c+"="+o[c]);return l.join("&")}}(r.ajax.data),r.ajax.dataFilter=function(e){return function(a){a=JSON.parse(a);var r=JSON.stringify({draw:t,recordsTotal:a["@odata.count"],recordsFiltered:a["@odata.count"],data:a.value});return e&&e.call(null,a,r),r}}(r.ajax.dataFilter),a.DataTable(r)})},e.fn.oDataTable.headerWrapperString="<div>",e.fn.oDataTable.SearchTypes={},e.fn.oDataTable.SearchTypes.default=e.fn.oDataTable.SearchTypes.string=e.fn.oDataTable.SearchTypes["string-contains"]={getFilterString:function(e,a){return"contains(tolower("+e+"), '"+a.toLowerCase()+"')"},setHeaderFooter:function(a,t,r){var n="",o=a.index();t&&t.searchCols&&t.searchCols[o]&&t.searchCols[o].search&&(n=t.searchCols[o].search);var l=e('<input type="text" style="font-weight: normal; padding: 4px; width: 100%; border-radius: 4px; border: 1px solid #ddd;" value="'+n+'">');l.on("change keyup",function(t){a.search(e(this).val()),a.draw()});var c=l.clone(!0);c.on("click",function(e){e.stopPropagation()}),c.on("change keyup",function(a){i.val(e(this).val())}),e(a.header()).append(e(e.fn.oDataTable.headerWrapperString).append(c));var i=l.clone(!0);i.on("change keyup",function(a){c.val(e(this).val())}),e(a.footer()).append(i)},setHeaderFooter_searchChoices:function(a,t,r,n){var o="",l=a.index();t&&t.searchCols&&t.searchCols[l]&&t.searchCols[l].search&&(o=t.searchCols[l].search);for(var c=0;c<n.length;c++)null!=n[c]?"object"!=_typeof(n[c])?n[c]={text:n[c],value:n[c],selected:o==n[c]}:("function"==typeof n[c].value&&(n[c].value=n[c].value(a,t,r,n)),n[c].selected=o==n[c].value):n[c]={text:"-",value:"",selected:""==o};var i=n.map(function(e){return'<option value="'+e.value+'"'+(e.selected?"selected":"")+">"+e.text+"</option>"}).join(""),s=e('<select style="font-weight: normal; padding: 4px; width: 100%; border-radius: 4px; border: 1px solid #ddd;">'+i+"</select>");s.on("change",function(t){e(this).val()?a.search(e(this).val()):a.search(""),a.draw()});var d=s.clone(!0).on("click",function(e){e.stopPropagation()}).on("change",function(a){u.val(e(this).val())});e(a.header()).append(e(e.fn.oDataTable.headerWrapperString).append(d));var u=s.clone(!0).on("change",function(a){d.val(e(this).val())});e(a.footer()).append(u)}},e.fn.oDataTable.SearchTypes["string-equals"]={getFilterString:function(e,a){return e+" eq '"+a+"'"},setHeaderFooter:e.fn.oDataTable.SearchTypes.default.setHeaderFooter,setHeaderFooter_searchChoices:e.fn.oDataTable.SearchTypes.default.setHeaderFooter_searchChoices},e.fn.oDataTable.SearchTypes.date=e.fn.oDataTable.SearchTypes["date-between"]={getFilterString:function(e,a){if(-1==a.indexOf(" - "))return"";var t=a.split(" - ");if(t.length<2||0==t[0].replace(/\s+/g,"").length||0==t[1].replace(/\s+/g,"").length)return"";var r=moment(t[0]).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),n=moment(t[1]).format("YYYY-MM-DDTHH:mm:ss.SSSZ");return"Invalid date"==r||"Invalid date"==n?"":"("+e+" ge "+r+" and "+e+" le "+n+")"},setHeaderFooter:function(a,t,r){var n="",o=a.index();t&&t.searchCols&&t.searchCols[o]&&t.searchCols[o].search&&(n=t.searchCols[o].search);var l=e('<input type="text" style="font-weight: normal; padding: 4px; width: 100%; border-radius: 4px; border: 1px solid #ddd;" value="'+n+'">');l.on("change keyup",function(t){a.search(e(this).val()),a.draw()});var c=l.clone(!0);c.on("click",function(e){e.stopPropagation()}),c.on("change keyup",function(a){i.val(e(this).val())}),c.daterangepicker({autoUpdateInput:!1}),c.on("apply.daterangepicker",function(e,a){c.val(a.startDate.format("YYYY/MM/DD")+" - "+a.endDate.format("YYYY/MM/DD")),c.trigger("change")}),e(a.header()).append(e(e.fn.oDataTable.headerWrapperString).append(c));var i=l.clone(!0);i.on("click",function(e){e.stopPropagation()}),i.on("change keyup",function(a){c.val(e(this).val())}),i.daterangepicker({autoUpdateInput:!1}),i.on("apply.daterangepicker",function(e,a){i.val(a.startDate.format("YYYY/MM/DD")+" - "+a.endDate.format("YYYY/MM/DD")),i.trigger("change")}),e(a.footer()).append(i)},setHeaderFooter_searchChoices:e.fn.oDataTable.SearchTypes.default.setHeaderFooter_searchChoices}}(jQuery);